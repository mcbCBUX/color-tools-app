<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Color Tab App</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
    .nav button { margin: 5px; padding: 10px 15px; cursor: pointer; }
    .tab { display: none; padding: 20px; background: white; border: 1px solid #ccc; border-radius: 8px; }
    .tab.active { display: block; }
    .swatch { width: 100px; height: 100px; margin: 10px; display: inline-block; border: 1px solid #333; }
    .input-container { margin-bottom: 15px; }
    .help-text { font-size: 0.9em; color: #666; }
  </style>
</head>
<body>

  <h1>ðŸŽ¨ Color Tab App</h1>

  <div class="nav">
    <button onclick="showTab('swatch')">Single Swatch</button>
    <button onclick="showTab('converter')">RGBA to HEX</button>
    <button onclick="showTab('palette')">Palette Viewer</button>
    <button onclick="showTab('gallery')">Gradient Gallery</button>
  </div>

  <!-- Tab 1: Multiple Color Swatches -->
<div id="swatch" class="tab active">
  <h2>Color Swatches</h2>
  <div class="input-container">
    <label for="colorInput">Enter a list of colors (HEX or RGBA):</label>
    <input type="text" id="colorInput" placeholder='e.g. ["#fdab33", [0.2, 0.6, 0.8, 0.7], "#33fdab", [0.8, 0.2, 0.5, 1.0]]'>
    <button onclick="generateSwatches()">Generate Swatches</button>
  </div>
  <p class="help-text">
    Examples of valid formats:<br>
    Single: <code>"#fdab33"</code> or <code>[0.2, 0.6, 0.8, 0.7]</code><br>
    Multiple: <code>["#fdab33", [0.2, 0.6, 0.8, 0.7], "#33fdab"]</code>
  </p>
  <div id="swatchContainer" style="display: flex; flex-wrap: wrap;"></div>
</div>

<script>
  function generateSwatches() {
    const colorInput = document.getElementById('colorInput').value;
    const swatchContainer = document.getElementById('swatchContainer');
    swatchContainer.innerHTML = '';

    let colors;
    try {
      colors = JSON.parse(colorInput);
      if (!Array.isArray(colors)) {
        throw new Error("Input must be a JSON array.");
      }
    } catch (error) {
      swatchContainer.innerHTML = '<p style="color: red;">Invalid input format. Please enter a valid JSON array like ["#fdab33", [0.2, 0.6, 0.8, 0.7]].</p>';
      return;
    }

    colors.forEach(color => {
      let bgColor = '';
      let labelText = '';

      if (Array.isArray(color) && color.length === 4) {
        // Normalize RGBA values: convert 0â€“1 floats to 0â€“255 if needed
        const rgba = color.map((v, i) => i < 3 ? Math.round(v * 255) : v);
        bgColor = `rgba(${rgba.join(',')})`;
        labelText = `rgba(${rgba.join(',')})`;
      } else if (typeof color === 'string') {
        bgColor = color;
        labelText = color;
      } else {
        labelText = 'Invalid color';
        bgColor = '#ccc';
      }

      const swatch = document.createElement('div');
      swatch.className = 'swatch';
      swatch.style.backgroundColor = bgColor;

      const label = document.createElement('div');
      label.style.textAlign = 'center';
      label.style.marginTop = '5px';
      label.style.fontSize = '0.9em';
      label.innerText = labelText;

      const wrapper = document.createElement('div');
      wrapper.style.margin = '10px';
      wrapper.style.textAlign = 'center';
      wrapper.appendChild(swatch);
      wrapper.appendChild(label);

      swatchContainer.appendChild(wrapper);
    });
  }
</script>


  <!-- Tab 2: RGBA to HEX Converter -->
  <div id="converter" class="tab">
    <h2>RGBA to HEX Converter</h2>
    <input type="text" id="rgbaInput" placeholder="e.g. rgba(0, 153, 102, 1)">
    <button onclick="convertToHex()">Convert</button>
    <p id="hexOutput"></p>
  </div>

  <!-- Tab 3: Palette Viewer -->
  <div id="palette" class="tab">
    <h2>Plasma Palette Viewer</h2>
    <div id="paletteContainer"></div>
  </div>

  <script>
    function showTab(id) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function rgbaStringToHex(rgbaStr) {
      const match = rgbaStr.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d*\\.?\\d+)\\)/);
      if (!match) return "Invalid RGBA format";
      const [_, r, g, b, a] = match;
      const alpha = Math.round(parseFloat(a) * 255);
      return `#${(+r).toString(16).padStart(2, '0')}${(+g).toString(16).padStart(2, '0')}${(+b).toString(16).padStart(2, '0')}${alpha.toString(16).padStart(2, '0')}`;
    }

    function convertToHex() {
      const input = document.getElementById('rgbaInput').value;
      const output = rgbaStringToHex(input);
      document.getElementById('hexOutput').innerText = `HEX: ${output}`;
    }

    // Plasma palette (approximate RGB values)
    const plasmaColors = [
      [0.05, 0.03, 0.53], [0.25, 0.02, 0.65], [0.45, 0.03, 0.70],
      [0.65, 0.10, 0.65], [0.80, 0.25, 0.55], [0.90, 0.45, 0.40],
      [0.98, 0.65, 0.25], [0.99, 0.85, 0.10], [0.95, 0.95, 0.25], [0.90, 0.99, 0.45]
    ];

    const paletteContainer = document.getElementById('paletteContainer');
    plasmaColors.forEach(rgb => {
      const div = document.createElement('div');
      div.className = 'swatch';
      div.style.backgroundColor = `rgb(${rgb.map(c => Math.round(c * 255)).join(',')})`;
      paletteContainer.appendChild(div);
    });
  </script>

</body>
</html>
