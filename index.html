<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Color Tab App</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
 
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.4.2/chroma.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f9f9f9;
    }
    .nav button {
      margin: 5px;
      padding: 10px 15px;
      cursor: pointer;
    }
    .tab {
      display: none;
      padding: 20px;
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .tab.active {
      display: block;
    }
    .swatch {
      width: 100px;
      height: 100px;
      margin: 10px;
      display: inline-block;
      border: 1px solid #333;
    }
    .input-container {
      margin-bottom: 15px;
    }
    .help-text {
      font-size: 0.9em;
      color: #666;
    }
  </style>
  <!-- Tab navigation script -->
  <script>
    function showTab(tabId) {
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
      });
      const target = document.getElementById(tabId);
      if (target) {
        target.classList.add('active');
      }
    }
  </script>
</head>
<body>

  <h1>ðŸŽ¨ Color Tools App</h1>

<div class="nav">
  <button onclick="showTab('swatch')">Color Swatches</button>
  <button onclick="showTab('converter')">RGBA â†” HEX Converter</button>
  <button onclick="showTab('palette')">Palette Viewer</button>
  <button onclick="showTab('gallery')">Gradient Gallery</button>
</div>

<!-- Tab 1: Swatch -->
<div id="swatch" class="tab active">
  <h2>Color Swatches</h2>
  <div class="input-container">
    <label for="colorInput">Enter a list of colors (HEX or RGBA):</label>
    <input
      type="text"
      id="colorInput"
      placeholder="e.g. #fdab33, (0.2, 0.6, 0.8, 0.7), #33fdab, (0.8, 0.2, 0.5, 1.0)">
    <button onclick="generateSwatches()">Generate Swatches</button>
  </div>
  <p class="help-text">
    Examples of valid formats:<br>
    Single: <code>#fdab33</code> or <code>(0.2, 0.6, 0.8, 0.7)</code><br>
    Multiple: <code>#fdab33, (0.2, 0.6, 0.8, 0.7), #33fdab, (0.8, 0.2, 0.5, 1.0)</code>
  </p>
  <div id="swatchContainer" style="display: flex; flex-wrap: wrap;"></div>
</div>

<script>
  function generateSwatches() {
    const rawInput = document.getElementById('colorInput').value;
    const swatchContainer = document.getElementById('swatchContainer');
    swatchContainer.innerHTML = '';

    try {
      const colors = [];
      const regex = /#(?:[0-9a-fA-F]{3}){1,2}|rgba?\s*\(([^)]+)\)|\(([^)]+)\)/g;

      const matches = rawInput.match(regex);
      matches.forEach(match => {
        match = match.trim();
        if (match.startsWith('#')) {
          colors.push(match);
        } else {
          const inner = match.replace(/[()]/g, '');
          const rgbaValues = inner.split(',').map(v => parseFloat(v.trim()));
          if (rgbaValues.length === 4 && rgbaValues.every(v => !isNaN(v))) {
            colors.push(rgbaValues);
          }
        }
      });

      if (!colors.length) throw new Error("No valid colors found.");

      colors.forEach(color => {
        const swatch = document.createElement('div');
        swatch.className = 'swatch';
        swatch.style.backgroundColor = Array.isArray(color)
          ? `rgba(${color.join(',')})`
          : color;

        const label = document.createElement('div');
        label.style.textAlign = 'center';
        label.style.marginTop = '5px';
        label.style.fontSize = '0.9em';
        label.innerText = Array.isArray(color)
          ? `rgba(${color.join(',')})`
          : color;

        const wrapper = document.createElement('div');
        wrapper.style.margin = '10px';
        wrapper.style.textAlign = 'center';
        wrapper.appendChild(swatch);
        wrapper.appendChild(label);

        swatchContainer.appendChild(wrapper);
      });

    } catch (error) {
      swatchContainer.innerHTML = '<p style="color: red;">Could not parse your input. Try using HEX codes and RGBA in parentheses.</p>';
    }
  }
</script>


<!-- Tab 2: RGBA â†” HTML Converter -->
<div id="converter" class="tab">
  <h2>RGBA â†” HTML Converter</h2>
  <div class="input-container">
    <label for="colorConverterInput">Enter HEX or RGBA values:</label>
    <input
      type="text"
      id="colorConverterInput"
      placeholder="e.g. rgba(0, 153, 102, 1), #ff6432, rgba(0, 0, 255, 0.8)">
    <button onclick="convertBidirectional()">Convert & Visualize</button>
  </div>
 <p class="help-text">
    Examples of valid formats:<br>
    Single: <code>#fdab33</code> or <code>(0.2, 0.6, 0.8, 0.7)</code><br>
    Multiple: <code>#fdab33, (0.2, 0.6, 0.8, 0.7), #33fdab, (0.8, 0.2, 0.5, 1.0)</code>
  </p>
  <div id="convertedSwatches" style="display: flex; flex-wrap: wrap;"></div>
</div>

<script>
  function convertBidirectional() {
    const inputStr = document.getElementById("colorConverterInput").value;
    const swatchArea = document.getElementById("convertedSwatches");
    swatchArea.innerHTML = "";

    // Match HEX codes or anything in parentheses
    const regex = /#(?:[0-9a-fA-F]{3}){1,2}|\(([^)]+)\)/g;
    const matches = inputStr.match(regex);

    if (!matches) {
      swatchArea.innerHTML = '<p style="color: red;">No valid input found. Try using #rrggbb or (r, g, b, a)</p>';
      return;
    }

    matches.forEach(match => {
      let hex = null;
      let rgba = null;
      let inputDisplay = match;

      if (match.startsWith('#')) {
        const hexRaw = match.slice(1);
        if (hexRaw.length === 6) {
          const r = parseInt(hexRaw.slice(0, 2), 16);
          const g = parseInt(hexRaw.slice(2, 4), 16);
          const b = parseInt(hexRaw.slice(4, 6), 16);
          hex = match.toLowerCase();
          rgba = `rgba(${r}, ${g}, ${b}, 1)`;
        }
      } else {
        const parts = match.replace(/[()]/g, '').split(',').map(n => parseFloat(n.trim()));
        if (parts.length === 4 && parts.every(n => !isNaN(n))) {
          const [r, g, b, a] = parts;
          hex = `#${[r, g, b].map(c => Math.round(c * 255).toString(16).padStart(2, '0')).join('')}`;
          rgba = `rgba(${r}, ${g}, ${b}, ${a})`;
        }
      }

      if (hex && rgba) {
        const wrapper = document.createElement("div");
        wrapper.style.margin = "10px";
        wrapper.style.textAlign = "center";

        const swatch = document.createElement("div");
        swatch.className = "swatch";
        swatch.style.backgroundColor = rgba;
        wrapper.appendChild(swatch);

        const label = document.createElement("div");
        label.style.fontSize = "0.9em";
        label.style.marginTop = "5px";
        label.innerText = `${inputDisplay} â†’ ${hex} / ${rgba}`;
        wrapper.appendChild(label);

        swatchArea.appendChild(wrapper);
      }
    });
  }
</script>


<!-- Tab 3: Palette Generation -->
<div id="palette" class="tab">
  <h2>Palette Generation of N Colours</h2>
  <div class="input-container">
    <label for="colorCount">Number of colors:</label>
    <input type="number" id="colorCount" min="1" max="20" value="10" placeholder="e.g. 10">
    <label for="colormapChoice">Choose a colormap:</label>
    <select id="colormapChoice" onchange="updateGradientPreview()">
      <optgroup label="Chroma Native">
        <option value="viridis">Viridis</option>
        <option value="plasma">Plasma</option>
        <option value="magma">Magma</option>
        <option value="cividis">Cividis</option>
      </optgroup>
      <optgroup label="Custom Presets">
        <option value="YlGnBu">YlGnBu</option>
        <option value="BuGn">BuGn</option>
        <option value="Spectral">Spectral</option>
      </optgroup>
    </select>
    <button onclick="generatePalette()">Generate Palette</button>
  </div>
  <p class="help-text">
    Generates a palette of 1 to 20 colors based on the selected colormap. HEX codes and rounded RGB values are displayed below.
  </p>
  <div id="paletteSwatches" style="display: flex; flex-wrap: wrap;"></div>
  <h3>Colormap Gradient Previews</h3>
  <div id="colormapPreviews" style="margin-top: 20px;"></div>
  <div id="errorMessage" style="color: red; margin-top: 10px; display: none;"></div>
</div>

<style>
  .swatch {
    width: 100px; 
    height: 100px;
    border: 1px solid #333;
    border-radius: 4px;
    margin: 10px;
  }
  .gradient-preview {
    width: 200px;
    height: 20px;
    border: 1px solid #ccc;
    border-radius: 4px;
    margin: 5px 0;
  }
  .input-container {
    display: flex;
    gap: 10px;
    align-items: center;
    margin-bottom: 20px;
  }
</style>

<script>
  function generatePalette() {
    const count = parseInt(document.getElementById('colorCount').value, 10);
    const mapName = document.getElementById('colormapChoice').value;
    const swatchArea = document.getElementById('paletteSwatches');
    const errorMessage = document.getElementById('errorMessage');
    swatchArea.innerHTML = '';
    errorMessage.style.display = 'none';

    if (isNaN(count) || count < 1 || count > 20) {
      errorMessage.style.display = 'block';
      errorMessage.innerText = 'Please enter a number between 1 and 20.';
      return;
    }

    const customMaps = {
      YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#0c2c84'],
      BuGn: ['#f7fcfd', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#08589e'],
      Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2']
    };

    let scale;
    try {
      if (customMaps[mapName]) {
        scale = chroma.scale(customMaps[mapName]).mode('lab').colors(count);
      } else {
        const validChromaMaps = ['viridis', 'plasma', 'magma', 'cividis'];
        if (!validChromaMaps.includes(mapName)) {
          throw new Error(`Invalid colormap: ${mapName}`);
        }
        scale = chroma.scale(mapName).mode('lab').colors(count);
      }
    } catch (error) {
      console.error(`Error generating palette for ${mapName}:`, error);
      errorMessage.style.display = 'block';
      errorMessage.innerText = `Failed to generate palette for ${mapName}.`;
      return;
    }

    scale.forEach(hex => {
      const rgb = chroma(hex).rgba();
      const roundedRGB = `rgba(${rgb.map((v, i) => i < 3 ? Math.round(v) : v.toFixed(2)).join(', ')})`;

      const wrapper = document.createElement('div');
      wrapper.style.margin = '10px';
      wrapper.style.textAlign = 'center';

      const swatch = document.createElement('div');
      swatch.className = 'swatch';
      swatch.style.backgroundColor = hex;
      wrapper.appendChild(swatch);

      const label = document.createElement('div');
      label.style.fontSize = '0.9em';
      label.style.marginTop = '5px';
      label.innerText = `${hex} / ${roundedRGB}`;
      wrapper.appendChild(label);

      swatchArea.appendChild(wrapper);
    });
  }

  function updateGradientPreview() {
    const mapName = document.getElementById('colormapChoice').value;
    const previewArea = document.getElementById('colormapPreviews');
    const errorMessage = document.getElementById('errorMessage');
    previewArea.innerHTML = '';
    errorMessage.style.display = 'none';

    const customMaps = {
      YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#0c2c84'],
      BuGn: ['#f7fcfd', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#08589e'],
      Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2']
    };

    let colors;
    try {
      colors = customMaps[mapName] ? chroma.scale(customMaps[mapName]).mode('lab').colors(20) : chroma.scale(mapName).mode('lab').colors(20);
    } catch (error) {
      console.error(`Error generating preview for ${mapName}:`, error);
      errorMessage.style.display = 'block';
      errorMessage.innerText = `Unable to generate preview for ${mapName}`;
      return;
    }

    const gradientDiv = document.createElement('div');
    gradientDiv.className = 'gradient-preview';
    gradientDiv.style.background = `linear-gradient(to right, ${colors.join(', ')})`;
    previewArea.appendChild(gradientDiv);

    const label = document.createElement('div');
    label.style.fontSize = '0.9em';
    label.style.marginTop = '5px';
    label.innerText = `${mapName} Preview`;
    previewArea.appendChild(label);
  }

  // Initialize preview on load
  document.addEventListener('DOMContentLoaded', updateGradientPreview);
</script>

  
<!-- Tab 4: Gradient Gallery -->
<div id="gallery" class="tab">
  <h2>Gradient Gallery</h2>
  <p class="help-text">
    Smooth gradients for various colormaps, interpolated across 256 steps.
  </p>
  <div id="gradientGallery" style="margin-top: 20px;"></div>
  <div id="errorMessage" style="color: red; margin-top: 10px; display: none;"></div>
</div>

<style>
  .gradient-bar {
    width: 100%;
    max-width: 800px; 
    height: 40px;
    border: 1px solid #ccc;
    border-radius: 4px;
    margin-bottom: 15px;
  }
  .gradient-label {
    font-weight: bold;
    margin-bottom: 5px;
    font-size: 1em;
    text-transform: capitalize; 
  }
  @media (max-width: 600px) {
    .gradient-bar {
      max-width: 100%;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', renderGradientGallery);

  function renderGradientGallery() {
    const container = document.getElementById('gradientGallery');
    const errorMessage = document.getElementById('errorMessage');
    container.innerHTML = '';
    errorMessage.style.display = 'none';

    // Ensure Chroma.js is loaded
    if (typeof chroma === 'undefined') {
      console.error('Chroma.js is not loaded.');
      errorMessage.style.display = 'block';
      errorMessage.innerText = 'Error: Chroma.js library is not loaded.';
      return;
    }

    const colormaps = {
      viridis: chroma.scale('viridis').mode('lab').colors(50),
      plasma: chroma.scale('plasma').mode('lab').colors(50),
      magma: chroma.scale('magma').mode('lab').colors(50),
      cividis: chroma.scale('cividis').mode('lab').colors(50),
      YlGnBu: chroma.scale(['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#0c2c84']).mode('lab').colors(50),
      BuGn: chroma.scale(['#f7fcfd', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#08589e']).mode('lab').colors(50),
      Spectral: chroma.scale(['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2']).mode('lab').colors(50)
    };

    Object.entries(colormaps).forEach(([name, colors]) => {
      try {
        const label = document.createElement('div');
        label.innerText = name;
        label.className = 'gradient-label';

        const bar = document.createElement('div');
        bar.className = 'gradient-bar';
        bar.style.background = `linear-gradient(to right, ${colors.join(', ')})`;

        container.appendChild(label);
        container.appendChild(bar);
      } catch (error) {
        console.error(`Failed to render gradient for ${name}:`, error);
        errorMessage.style.display = 'block';
        errorMessage.innerText = `Error rendering gradient for ${name}.`;
      }
    });
  }
</script>
  
</body>
</html>

